window.__require=function t(e,o,n){function c(a,r){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var d=o[a]={exports:{}};e[a][0].call(d.exports,function(t){return c(e[a][1][t]||t)},d,d.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)c(n[a]);return c}({Card:[function(t,e,o){"use strict";var n;cc._RF.push(e,"03c4bqQVg1EPbeXzjnjRfXc","Card"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:c,property:i}=cc._decorator;let a=n=class extends cc.Component{constructor(){super(...arguments),this.nameLabel=null,this.countLabel=null,this.cardSprite=null,this.addButton=null,this.minusButton=null,this.count=0,this.index=0}initCard(t,e,o,c){var i=this;cc.resources.load(e,cc.SpriteFrame,function(t,e){i.cardSprite.spriteFrame=e}),this.nameLabel.string=t,this.countLabel.string=`${this.count}`,this.index=o,n.onCountChanged=c||null}start(){this.addButton.node.on(cc.Node.EventType.TOUCH_START,()=>{this.count+=1,this.countLabel.string=`${this.count}`,n.onCountChanged&&n.onCountChanged(this.index,this.count)}),this.minusButton.node.on(cc.Node.EventType.TOUCH_START,()=>{this.count>0?this.count-=1:this.count=0,this.countLabel.string=`${this.count}`,n.onCountChanged&&n.onCountChanged(this.index,this.count)})}};a.onCountChanged=null,__decorate([i(cc.Label)],a.prototype,"nameLabel",void 0),__decorate([i(cc.Label)],a.prototype,"countLabel",void 0),__decorate([i(cc.Sprite)],a.prototype,"cardSprite",void 0),__decorate([i(cc.Button)],a.prototype,"addButton",void 0),__decorate([i(cc.Button)],a.prototype,"minusButton",void 0),a=n=__decorate([c],a),o.default=a,cc._RF.pop()},{}],Dialog:[function(t,e,o){"use strict";var n;cc._RF.push(e,"0d8e2mHmYVEwa4w7KH+jrUZ","Dialog"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:c,property:i}=cc._decorator;let a=n=class extends cc.Component{constructor(){super(...arguments),this.titleLabel=null,this.contentLabel=null,this.confirmButton=null,this.cancelButton=null}static open(t,e,o,c){n.onConfirm=o||null,n.onCancel=c||null,n.isOpen=!0,n.title=t,n.content=e,n.node&&(n.node.active=!0)}static close(){n.onConfirm=null,n.onCancel=null,n.isOpen=!1,n.title="",n.content="",n.node&&(n.node.active=!1)}start(){n.node=this.node,this.node.on(cc.Node.EventType.TOUCH_START,t=>{t.target!==this.confirmButton.node&&t.target!==this.cancelButton.node&&t.stopPropagation()},this,!0),this.confirmButton.node.on(cc.Node.EventType.TOUCH_START,()=>{n.onConfirm&&n.onConfirm(),n.close()}),this.cancelButton.node.on(cc.Node.EventType.TOUCH_START,()=>{n.onCancel&&n.onCancel(),n.close()})}update(t){this.titleLabel&&this.titleLabel.string!==n.title&&(this.titleLabel.string=n.title),this.contentLabel&&this.contentLabel.string!==n.content&&(this.contentLabel.string=n.content),this.node&&(this.node.active=n.isOpen)}};a.onConfirm=null,a.onCancel=null,a.title="",a.content="",a.isOpen=!1,a.node=null,__decorate([i(cc.Label)],a.prototype,"titleLabel",void 0),__decorate([i(cc.Label)],a.prototype,"contentLabel",void 0),__decorate([i(cc.Button)],a.prototype,"confirmButton",void 0),__decorate([i(cc.Button)],a.prototype,"cancelButton",void 0),a=n=__decorate([c],a),o.default=a,cc._RF.pop()},{}],EntryRoomButtton:[function(t,e,o){"use strict";cc._RF.push(e,"a22b09K4p5Kr6T56oYj3Vn8","EntryRoomButtton"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.buttonNode=null,this.inputNode=null,this.submitButton=null,this.cancelButton=null,this.editBox=null,this.onSubmit=null,this.onButtonClick=null}showInput(){this.inputNode.active=!0,this.buttonNode.active=!1}closeInput(){this.inputNode.active=!1,this.buttonNode.active=!0}setEnable(t){this.closeInput(),this.buttonNode.children[1].color=t?new cc.Color(255,255,255):new cc.Color(107,110,120),this.buttonNode.children[2].opacity=t?255:76}start(){this.closeInput(),this.cancelButton&&this.cancelButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.closeInput()),this.submitButton&&this.submitButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onSubmit&&this.onSubmit(this.editBox.string)),this.buttonNode.on(cc.Node.EventType.TOUCH_START,()=>this.onButtonClick&&this.onButtonClick())}};__decorate([c(cc.Node)],i.prototype,"buttonNode",void 0),__decorate([c(cc.Node)],i.prototype,"inputNode",void 0),__decorate([c(cc.Button)],i.prototype,"submitButton",void 0),__decorate([c(cc.Button)],i.prototype,"cancelButton",void 0),__decorate([c(cc.EditBox)],i.prototype,"editBox",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],GameState:[function(t,e,o){"use strict";cc._RF.push(e,"ab792dLMhNLtIiZjO6/MJX6","GameState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";var n;cc._RF.push(e,"fc6fehjWWBHqLeJiTPg7S+B","Home"),Object.defineProperty(o,"__esModule",{value:!0});const c=t("../config"),i=t("../util"),{ccclass:a,property:r}=cc._decorator;let s=n=class extends cc.Component{constructor(){super(...arguments),this.gameIdLabel=null,this.secretKeyLabel=null,this.urlLabel=null,this.startButton=null,this.playerStartButton=null}start(){i.checkMgobe(),n.gameId||(n.gameId=c.default.gameId,n.secretKey=c.default.secretKey,n.url=c.default.url),this.gameIdLabel.string=`\u5f53\u524d\u6e38\u620fID:${n.gameId}`,this.secretKeyLabel.string=`\u6e38\u620fkey:${n.secretKey}`,this.urlLabel.string=`\u57df\u540d:${n.url}`,this.startButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.initSDK(!0)),this.playerStartButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.initSDK(!1))}initSDK(t){if(i.checkMgobe()){if(i.isInited())return i.appendLog("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c");if(!n.gameId||!n.secretKey||!n.url)return i.appendLog("\u8bf7\u5728\u9996\u9875\u586b\u5165\u6b63\u786e\u7684 gameId\u3001secretKey\u3001url");if(i.appendLog("\u6b63\u5728\u521d\u59cb\u5316 SDK"),cc.sys.isNative&&!n.cacertNativeUrl)return cc.loader.loadRes("/cacert",cc.Asset,(e,o)=>{i.appendLog("\u52a0\u8f7d\u8bc1\u4e66\u7ed3\u675f "+!e),e||(n.cacertNativeUrl=o.nativeUrl,this.initSDK(t))});i.initSDK(n.gameId,n.secretKey,n.url,n.cacertNativeUrl,e=>{e.code===MGOBE.ErrCode.EC_OK?(i.appendLog("\u521d\u59cb\u5316 SDK \u6210\u529f"),t?cc.director.loadScene("judgeroom"):cc.director.loadScene("mgobe")):i.appendLog(`\u521d\u59cb\u5316 SDK \u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${e.code}`)})}}};s.cacertNativeUrl="",s.gameId="obg-2val1ohd",s.secretKey="bb72ecb2adf9a45a6d9604c9a91a6e6b9a2bd80f",s.url="2val1ohd.wxlagame.com",__decorate([r(cc.Label)],s.prototype,"gameIdLabel",void 0),__decorate([r(cc.Label)],s.prototype,"secretKeyLabel",void 0),__decorate([r(cc.Label)],s.prototype,"urlLabel",void 0),__decorate([r(cc.Button)],s.prototype,"startButton",void 0),__decorate([r(cc.Button)],s.prototype,"playerStartButton",void 0),s=n=__decorate([a],s),o.default=s,cc._RF.pop()},{"../config":"config","../util":"util"}],JudgeRoom:[function(t,e,o){"use strict";cc._RF.push(e,"f49eazsf3JFYr+BLDtoeybb","JudgeRoom"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../ui/EntryRoomButtton"),c=t("../util"),i=t("../global"),a=t("../ui/Card"),{ccclass:r,property:s}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.createRoomNode=null,this.cardScrollView=null,this.cardPrefab=null,this.selectedCardInfoLabel=null,this.sumInfoLabel=null,this.lockSubmit=!1,this.cardInfo=[{id:"nvwu",name:"\u5973\u5deb",img:"nvwu"},{id:"langren",name:"\u72fc\u4eba",img:"langren"},{id:"yuyanjia",name:"\u9884\u8a00\u5bb6",img:"yuyanjia"},{id:"langmeiren",name:"\u72fc\u7f8e\u4eba",img:"langmeiren"},{id:"pingmin",name:"\u5e73\u6c11",img:"pingmin"},{id:"shouwei",name:"\u5b88\u536b",img:"nvwu"},{id:"lieren",name:"\u730e\u4eba",img:"langren"},{id:"bailangwang",name:"\u767d\u72fc\u738b",img:"yuyanjia"},{id:"zhadanshi",name:"\u70b8\u5f39\u5e08",img:"langmeiren"},{id:"baichi",name:"\u767d\u75f4",img:"pingmin"},{id:"zhanglao",name:"\u957f\u8001",img:"nvwu"},{id:"qie",name:"\u4f01\u9e45",img:"langren"},{id:"xiong",name:"\u718a",img:"yuyanjia"},{id:"mianyang",name:"\u7ef5\u7f8a",img:"langmeiren"},{id:"dagongji",name:"\u5927\u516c\u9e21",img:"pingmin"},{id:"qishi",name:"\u9a91\u58eb",img:"pingmin"}],this.cardData=[],this.selectedCardData=[]}start(){this.cardData=this.cardInfo.map(t=>({id:t.id,name:t.name,framename:t.img,count:0})),this.setCards(),this.createRoomNode.onButtonClick=()=>this.onCreateRoomNodeClick(),i.default.room&&(i.default.room.onUpdate=()=>this.onRoomUpdate())}setCards(){for(var t=0;t<this.cardData.length;t++){const e=cc.instantiate(this.cardPrefab).getComponent(a.default),o=t%7*120-360,n=-180*parseInt(t/7)-100;e.node.parent=this.cardScrollView.content,e.node.x=o,e.node.y=n,e.initCard(this.cardData[t].name,this.cardData[t].framename,t,(t,e)=>{this.cardData[t].count=e,this.updateSelectedCardsInfo()})}}updateSelectedCardsInfo(){let t="\u5df2\u9009: ",e=0;this.selectedCardData=[],this.cardData.forEach(o=>{o.count>0&&(t+=`${o.name} *${o.count}\u3001 `,e+=o.count,this.selectedCardData.push(o))}),this.selectedCardInfoLabel.string=t,this.sumInfoLabel.string=`\u603b\u4eba\u6570: ${e}`}generateRoomRoles(){var t=[];return this.selectedCardData.forEach(e=>{for(var o=0;o<e.count;o++)t.push({id:e.id,name:e.name})}),t}loadRoomScene(){this.lockSubmit=!0,cc.director.loadScene("room")}onCreateRoomNodeClick(){if(!c.isInited())return c.appendLog("\u8bf7\u5148\u521d\u59cb\u5316 SDK");!this.lockSubmit&&this.createRoom()}onRoomUpdate(){i.default.room.roomInfo&&i.default.room.roomInfo.playerList&&i.default.room.roomInfo.playerList.find(t=>t.id===MGOBE.Player.id)&&this.loadRoomScene()}onDisable(){i.default.room&&(i.default.room.onUpdate=null)}createRoom(){this.lockSubmit=!0,c.appendLog("\u6b63\u5728\u521b\u5efa\u623f\u95f4");const t=this.generateRoomRoles(),e=JSON.stringify(t);i.default.playersJson=e;const o={roomName:"cocos_demo",roomType:"create",maxPlayers:t.length+1,isPrivate:!0,customProperties:e,playerInfo:{name:"\u6cd5\u5b98",customPlayerStatus:0,customProfile:"0"}};i.default.room.initRoom(),i.default.room.createRoom(o,t=>{this.lockSubmit=!1,t.code===MGOBE.ErrCode.EC_OK?(c.appendLog(`\u521b\u5efa\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a${t.data.roomInfo.id}`),this.loadRoomScene()):c.appendLog(`\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}};__decorate([s(n.default)],l.prototype,"createRoomNode",void 0),__decorate([s(cc.ScrollView)],l.prototype,"cardScrollView",void 0),__decorate([s(cc.Prefab)],l.prototype,"cardPrefab",void 0),__decorate([s(cc.Label)],l.prototype,"selectedCardInfoLabel",void 0),__decorate([s(cc.Label)],l.prototype,"sumInfoLabel",void 0),l=__decorate([r],l),o.default=l,cc._RF.pop()},{"../global":"global","../ui/Card":"Card","../ui/EntryRoomButtton":"EntryRoomButtton","../util":"util"}],LinkLabel:[function(t,e,o){"use strict";cc._RF.push(e,"70290CXHv5KPb3Uwdb1pOkm","LinkLabel"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../util"),{ccclass:c,property:i}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.url=""}start(){this.url&&this.label.node.on(cc.Node.EventType.TOUCH_START,()=>n.openLink(this.url))}};__decorate([i(cc.Label)],a.prototype,"label",void 0),__decorate([i],a.prototype,"url",void 0),a=__decorate([c],a),o.default=a,cc._RF.pop()},{"../util":"util"}],MgobeScene:[function(t,e,o){"use strict";cc._RF.push(e,"300ad9LjVJC86v1A1hsSa7o","MgobeScene"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../util"),c=t("../global"),{ccclass:i,property:a}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.joinRoomButton=null,this.editBox=null,this.numberEditBox=null,this.lockSubmit=!1,this.timer=void 0}start(){this.joinRoomButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onJoinRoomNodeClick()),c.default.room&&(c.default.room.onUpdate=()=>this.onRoomUpdate())}loadRoomScene(){this.lockSubmit=!0,cc.director.loadScene("room")}onJoinRoomNodeClick(){if(!n.isInited())return n.appendLog("\u8bf7\u5148\u521d\u59cb\u5316 SDK");!this.lockSubmit&&this.joinRoom(this.editBox.string,this.numberEditBox.string)}onRoomUpdate(){c.default.room.roomInfo&&c.default.room.roomInfo.playerList&&c.default.room.roomInfo.playerList.find(t=>t.id===MGOBE.Player.id)&&this.loadRoomScene()}onDisable(){c.default.room&&(c.default.room.onUpdate=null),clearInterval(this.timer)}joinRoom(t,e){if(!t)return n.appendLog("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u623f\u95f4ID");this.lockSubmit=!0,n.appendLog(`\u6b63\u5728\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4ID\uff1a${t}`);const o={playerInfo:{name:"\u73a9\u5bb6",customPlayerStatus:0,customProfile:e}};c.default.room.initRoom({id:t}),c.default.room.joinRoom(o,t=>{this.lockSubmit=!1,t.code===MGOBE.ErrCode.EC_OK?(n.appendLog(`\u52a0\u5165\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a${t.data.roomInfo.id}`),this.loadRoomScene()):n.appendLog(`\u52a0\u5165\u623f\u95f4\u5931\u8d25\uff0c${t.code===MGOBE.ErrCode.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED?"\u5f53\u524d\u623f\u95f4\u73a9\u5bb6\u6570\u91cf\u5df2\u6ee1\uff0c":""}\u9519\u8bef\u7801\uff1a${t.code}`)})}};__decorate([a(cc.Button)],r.prototype,"joinRoomButton",void 0),__decorate([a(cc.EditBox)],r.prototype,"editBox",void 0),__decorate([a(cc.EditBox)],r.prototype,"numberEditBox",void 0),r=__decorate([i],r),o.default=r,cc._RF.pop()},{"../global":"global","../util":"util"}],ReadOnlyEditor:[function(t,e,o){"use strict";cc._RF.push(e,"23865u8EVBMSLkz1GtoQoCL","ReadOnlyEditor"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.value="",this.editor=null}setValue(t){this.value=t}start(){this.editor=this.node.getComponent(cc.EditBox)}update(t){this.editor.string=this.value}};i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],Room:[function(t,e,o){"use strict";cc._RF.push(e,"a5ba2lery9FjbGmYzzcIjf/","Room"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateSyncCmd=void 0;const n=t("../global"),c=t("../util"),i=t("../ui/Dialog"),a=t("../ui/UIChat"),r=t("../logic/StateSyncLogic"),s=t("../ui/ReadOnlyEditor"),l=t("../ui/UIMap"),{ccclass:d,property:u}=cc._decorator;var p;(function(t){t[t.up=1]="up",t[t.down=2]="down",t[t.left=3]="left",t[t.right=4]="right"})(p=o.StateSyncCmd||(o.StateSyncCmd={}));let h=class extends cc.Component{constructor(){super(...arguments),this.gameIdLlabel=null,this.playerIdLlabel=null,this.roomIdEditBox=null,this.onlineLlabel=null,this.leaveRoomButton=null,this.dialogPrefab=null,this.chatPrefab=null,this.chatContentNode=null,this.judgeOpNode=null,this.dealButton=null,this.redealButton=null,this.outButton=null,this.winButton=null,this.dismissRoomButton=null,this.map=null,this.uiChat=null,this.uiStateSync=null}start(){this.initDialog(),this.initPrefab(),this.onRoomUpdate(),this.initListener()}update(t){this.map.setPlayers(r.stateSyncState.players)}initDialog(){cc.instantiate(this.dialogPrefab).parent=this.node}initListener(){n.default.room&&(n.default.room.onUpdate=()=>this.onRoomUpdate()),this.leaveRoomButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onLeaveRoomButtonClick()),this.dismissRoomButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.onDismissRoomButtonClick()),this.dealButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.changeCustomProperties()),this.redealButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.sendToGameSvr(p.down)),this.outButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.sendToGameSvr(p.left)),this.winButton.node.on(cc.Node.EventType.TOUCH_START,()=>this.sendToGameSvr(p.right)),c.setBroadcastCallbacks(n.default.room,this,this)}initPrefab(){const t=cc.instantiate(this.chatPrefab);t.parent=this.chatContentNode,this.uiChat=t.getComponent(a.default),this.uiChat.onSubmit=t=>t&&this.sendToClient(t)}setRoomView(){const t=n.default.room&&n.default.room.roomInfo||{playerList:[],owner:void 0};this.gameIdLlabel.string=n.default.gameId,this.playerIdLlabel.string=MGOBE.Player.id,this.roomIdEditBox.setValue(t.id||""),this.onlineLlabel.string=t.playerList.filter(t=>t.commonNetworkState&&t.relayNetworkState).length+""||"0",t.owner===MGOBE.Player.id?this.judgeOpNode.active=!0:this.judgeOpNode.active=!1}onLeaveRoomButtonClick(){c.appendLog("\u70b9\u51fb\u79bb\u5f00\u623f\u95f4\u6309\u94ae"),i.default.open("\u786e\u5b9a\u8981\u9000\u51fa\u623f\u95f4\u7801\uff1f","\u9000\u51fa\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",()=>this.leaveRoom())}onDismissRoomButtonClick(){c.appendLog("\u70b9\u51fb\u89e3\u6563\u623f\u95f4\u6309\u94ae"),i.default.open("\u786e\u5b9a\u8981\u89e3\u6563\u623f\u95f4\u7801\uff1f","\u89e3\u6563\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",()=>this.dismissRoom())}onDisable(){n.default.room&&(n.default.room.onUpdate=null),i.default.close(),c.setBroadcastCallbacks(n.default.room,this,{})}onRoomUpdate(){if(!(n.default.room&&n.default.room.roomInfo&&n.default.room.roomInfo.playerList&&n.default.room.roomInfo.playerList.find(t=>t.id===MGOBE.Player.id)))return cc.director.loadScene("mgobe");this.setRoomView()}changeCustomProperties(){console.log("\u6b63\u5728\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u4e3a"),n.default.room.changeRoom({customProperties:n.default.playersJson},t=>{t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u6210\u529f"):c.appendLog(`\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}leaveRoom(){c.appendLog("\u6b63\u5728\u9000\u51fa\u623f\u95f4"),n.default.room.leaveRoom({},t=>{t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u9000\u51fa\u623f\u95f4\u6210\u529f"):c.appendLog(`\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}dismissRoom(){c.appendLog("\u6b63\u5728\u89e3\u6563\u623f\u95f4"),n.default.room.dismissRoom({},t=>{t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u89e3\u6563\u623f\u95f4\u6210\u529f"):c.appendLog(`\u89e3\u6563\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}sendToClient(t){c.appendLog("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");const e={recvPlayerList:[],recvType:MGOBE.types.RecvType.ROOM_ALL,msg:t};n.default.room.sendToClient(e,t=>{t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u6210\u529f"):c.appendLog(`\u53d1\u9001\u623f\u95f4\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}sendToGameSvr(t,e){const o={data:{cmd:t,customData:e}};n.default.room.sendToGameSvr(o,t=>{t.code===MGOBE.ErrCode.EC_OK?c.appendLog("\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f\u6210\u529f"):c.appendLog(`\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a${t.code}`)})}onJoinRoom(t){c.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u8fdb\u623f")}onLeaveRoom(t){c.appendLog("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u9000\u623f")}onDismissRoom(t){return c.appendLog("\u5e7f\u64ad\uff1a\u623f\u95f4\u89e3\u6563"),cc.director.loadScene("mgobe")}onRecvFromClient(t){this.uiChat.appendMsg(t.data.msg,t.data.sendPlayerId===MGOBE.Player.id)}onRecvFromGameSvr(t){console.log(`9999${t.data.data}`),r.setState(t.data&&t.data.data&&t.data.data.players)}};__decorate([u(cc.Label)],h.prototype,"gameIdLlabel",void 0),__decorate([u(cc.Label)],h.prototype,"playerIdLlabel",void 0),__decorate([u(s.default)],h.prototype,"roomIdEditBox",void 0),__decorate([u(cc.Label)],h.prototype,"onlineLlabel",void 0),__decorate([u(cc.Button)],h.prototype,"leaveRoomButton",void 0),__decorate([u(cc.Prefab)],h.prototype,"dialogPrefab",void 0),__decorate([u(cc.Prefab)],h.prototype,"chatPrefab",void 0),__decorate([u(cc.Node)],h.prototype,"chatContentNode",void 0),__decorate([u(cc.Node)],h.prototype,"judgeOpNode",void 0),__decorate([u(cc.Button)],h.prototype,"dealButton",void 0),__decorate([u(cc.Button)],h.prototype,"redealButton",void 0),__decorate([u(cc.Button)],h.prototype,"outButton",void 0),__decorate([u(cc.Button)],h.prototype,"winButton",void 0),__decorate([u(cc.Button)],h.prototype,"dismissRoomButton",void 0),__decorate([u(l.default)],h.prototype,"map",void 0),h=__decorate([d],h),o.default=h,cc._RF.pop()},{"../global":"global","../logic/StateSyncLogic":"StateSyncLogic","../ui/Dialog":"Dialog","../ui/ReadOnlyEditor":"ReadOnlyEditor","../ui/UIChat":"UIChat","../ui/UIMap":"UIMap","../util":"util"}],StateSyncLogic:[function(t,e,o){"use strict";function n(t){Array.isArray(t)&&(o.stateSyncState.players=[],t.forEach((t,e)=>{const n={x:e%7*120-360,y:-100*Math.floor(e/7)+120,id:t.id,card:t.card,seatId:t.seatId,out:t.out};o.stateSyncState.players.push(n)}))}cc._RF.push(e,"dc097KSQHtKr7tHSSJGosLp","StateSyncLogic"),Object.defineProperty(o,"__esModule",{value:!0}),o.setState=o.setDefauleSyncState=o.stateSyncState=void 0,o.stateSyncState={players:[]},o.setDefauleSyncState=function(t){n((t.roomInfo||{playerList:[]}).playerList.map(t=>({id:t.id,card:{id:"weizhi",name:"\u672a\u77e5"},seatId:t.customProfile,out:t.customPlayerStatus})))},o.setState=n,cc._RF.pop()},{}],TabButton:[function(t,e,o){"use strict";cc._RF.push(e,"b3c98BiNn9HQqgxl74vtegX","TabButton"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.bg1Node=null,this.bg2Node=null,this.isActive=!1}setActive(t){this.isActive=t}start(){}update(t){this.bg1Node.active=!this.isActive,this.bg2Node.active=!!this.isActive,this.node.getComponent(cc.Button).interactable=!this.isActive}};__decorate([c(cc.Node)],i.prototype,"bg1Node",void 0),__decorate([c(cc.Node)],i.prototype,"bg2Node",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],TitleBar:[function(t,e,o){"use strict";cc._RF.push(e,"4bfd93AV8ZPzqKcFFi3jVPS","TitleBar"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.backBtn=null,this.backScene=""}start(){this.backScene&&this.backBtn.on(cc.Node.EventType.TOUCH_START,()=>cc.director.loadScene(this.backScene))}};__decorate([c(cc.Node)],i.prototype,"backBtn",void 0),__decorate([c],i.prototype,"backScene",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],UIChat:[function(t,e,o){"use strict";cc._RF.push(e,"e346cxClG9LNrhvYjT/i1Sy","UIChat"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("./UIMessage"),{ccclass:c,property:i}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.msgRightPrefab=null,this.msgLeftPrefab=null,this.scrollContentNode=null,this.scrollView=null,this.sendButton=null,this.msgEditBox=null,this.onSubmit=null}appendMsg(t,e){const o=e?this.msgRightPrefab:this.msgLeftPrefab,c=cc.instantiate(o);c.parent=this.scrollContentNode,c.getComponent(n.default).setMessage(t)}refreshMsgItems(){let t=30;this.scrollContentNode.children.forEach(e=>{e.y=-t,t+=e.height+10}),this.scrollContentNode.height!==t&&(this.scrollContentNode.height=t,this.scrollView.scrollToBottom())}callback(){const t=this.msgEditBox.string||"";this.onSubmit&&this.onSubmit(t),this.msgEditBox.string=""}start(){this.sendButton.node.off(cc.Node.EventType.TOUCH_START,this.callback,this),this.sendButton.node.on(cc.Node.EventType.TOUCH_START,this.callback,this)}update(t){this.refreshMsgItems()}};__decorate([i(cc.Prefab)],a.prototype,"msgRightPrefab",void 0),__decorate([i(cc.Prefab)],a.prototype,"msgLeftPrefab",void 0),__decorate([i(cc.Node)],a.prototype,"scrollContentNode",void 0),__decorate([i(cc.ScrollView)],a.prototype,"scrollView",void 0),__decorate([i(cc.Button)],a.prototype,"sendButton",void 0),__decorate([i(cc.EditBox)],a.prototype,"msgEditBox",void 0),a=__decorate([c],a),o.default=a,cc._RF.pop()},{"./UIMessage":"UIMessage"}],UILog:[function(t,e,o){"use strict";var n;cc._RF.push(e,"c6b77FwWyJLwpcXKfx1nbCo","UILog"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:c,property:i}=cc._decorator;let a=n=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.logLabel=null,this.contentNode=null,this.length=0}static appendLog(t){n.staticLogStrs.push(t)}setLogStr(t){this.logLabel.string=t+"\n\n"}start(){}update(t){this.length!==n.staticLogStrs.length&&this.setLogStr(n.staticLogStrs.slice(-10).join("\n")),this.length=n.staticLogStrs.length,this.contentNode.height!==this.logLabel.node.height&&(this.contentNode.height=this.logLabel.node.height,this.scrollView.scrollToBottom())}};a.staticLogStrs=["\u6682\u65e0\u65e5\u5fd7\u4fe1\u606f"],__decorate([i(cc.ScrollView)],a.prototype,"scrollView",void 0),__decorate([i(cc.Label)],a.prototype,"logLabel",void 0),__decorate([i(cc.Node)],a.prototype,"contentNode",void 0),a=n=__decorate([c],a),o.default=a,cc._RF.pop()},{}],UIMap:[function(t,e,o){"use strict";cc._RF.push(e,"7bd5c689FVLhI65kaxzlAle","UIMap"),Object.defineProperty(o,"__esModule",{value:!0});const n=t("../global"),c=t("./UIPlayer"),i=t("../util"),{ccclass:a,property:r}=cc._decorator;let s=null;function l(t){if(!s){s=new cc.NodePool;for(let e=0;e<5;e++){let e=cc.instantiate(t);s.put(e)}}}function d(t){s.put(t)}let u=class extends cc.Component{constructor(){super(...arguments),this.playerPrefab=null,this.playerScrollView=null,this.players=[]}setPlayers(t){Array.isArray(t)||(t=[]),this.players.splice(t.length).forEach(t=>d(t));for(let o=this.players.length;o<t.length;o++)this.players.push((e=this.playerPrefab,s.size()>0?s.get():cc.instantiate(e)));var e;t.forEach((t,e)=>{const o=this.players[e].getComponent(c.default);o.node.parent=this.playerScrollView.content,i.appendLog(`owner: ${n.default.room.roomInfo.owner}, player:${t.card}`),MGOBE.Player.id===n.default.room.roomInfo.owner||MGOBE.Player.id===t.id?o.nameLabel.string=t.card.name:o.nameLabel.string="\u672a\u77e5",o.numLabel.string=t.seatId,o.node.x=t.x,o.node.y=t.y})}start(){l(this.playerPrefab)}update(t){}};__decorate([r(cc.Prefab)],u.prototype,"playerPrefab",void 0),__decorate([r(cc.ScrollView)],u.prototype,"playerScrollView",void 0),u=__decorate([a],u),o.default=u,cc._RF.pop()},{"../global":"global","../util":"util","./UIPlayer":"UIPlayer"}],UIMessage:[function(t,e,o){"use strict";cc._RF.push(e,"c031aWugCRDkZE14NBoZkdU","UIMessage"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.bgSprite=null,this.msg="",this.padding=10,this.maxLabelWidth=400}setMessage(t){this.msg=t}start(){}update(t){this.label.string!==this.msg&&(this.label.string=this.msg),this.label.node.height<30&&(this.label.overflow=cc.Label.Overflow.NONE),this.label.node.width>this.maxLabelWidth&&(this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.node.width=this.maxLabelWidth),this.bgSprite.node.width=this.label.node.width+this.padding+Math.abs(this.label.node.x-this.bgSprite.node.x),this.node.height=this.label.node.height+2*this.padding,this.bgSprite.node.height=this.node.height}};__decorate([c(cc.Label)],i.prototype,"label",void 0),__decorate([c(cc.Sprite)],i.prototype,"bgSprite",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],UIPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"4fed5v2tVpJsoLfwroC693q","UIPlayer"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.nameLabel=null,this.numLabel=null,this.icon1Sprite=null}start(){}};__decorate([c(cc.Label)],i.prototype,"nameLabel",void 0),__decorate([c(cc.Label)],i.prototype,"numLabel",void 0),__decorate([c(cc.Sprite)],i.prototype,"icon1Sprite",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],UIStateSync:[function(t,e,o){"use strict";cc._RF.push(e,"195a7y/ZdVIiIl+5ujA6bFS","UIStateSync"),Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:n,property:c}=cc._decorator;let i=class extends cc.Component{constructor(){super(...arguments),this.dealButton=null,this.redealButton=null,this.outButton=null,this.winButton=null,this.replayButton=null,this.dismissRoomButton=null,this.onUp=null,this.onDown=null,this.onLeft=null,this.onRight=null}start(){this.dealButton.node.off(cc.Node.EventType.TOUCH_START,this.onUpButtonClick,this),this.redealButton.node.off(cc.Node.EventType.TOUCH_START,this.onDownButtonClick,this),this.outButton.node.off(cc.Node.EventType.TOUCH_START,this.onLeftButtonClick,this),this.winButton.node.off(cc.Node.EventType.TOUCH_START,this.onRightButtonClick,this),this.dealButton.node.on(cc.Node.EventType.TOUCH_START,this.onUpButtonClick,this),this.redealButton.node.on(cc.Node.EventType.TOUCH_START,this.onDownButtonClick,this),this.outButton.node.on(cc.Node.EventType.TOUCH_START,this.onLeftButtonClick,this),this.winButton.node.on(cc.Node.EventType.TOUCH_START,this.onRightButtonClick,this)}update(t){}onUpButtonClick(){this.onUp&&this.onUp()}onDownButtonClick(){this.onDown&&this.onDown()}onLeftButtonClick(){this.onLeft&&this.onLeft()}onRightButtonClick(){this.onRight&&this.onRight()}};__decorate([c(cc.Button)],i.prototype,"dealButton",void 0),__decorate([c(cc.Button)],i.prototype,"redealButton",void 0),__decorate([c(cc.Button)],i.prototype,"outButton",void 0),__decorate([c(cc.Button)],i.prototype,"winButton",void 0),__decorate([c(cc.Button)],i.prototype,"replayButton",void 0),__decorate([c(cc.Button)],i.prototype,"dismissRoomButton",void 0),i=__decorate([n],i),o.default=i,cc._RF.pop()},{}],config:[function(t,e,o){"use strict";cc._RF.push(e,"a8db8oM0pVCBqMY+EmxpbqN","config"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={gameId:"obg-bq3n2v8a",secretKey:"9d08a4a8f7edd8c6025e6ca63a6e9b0cd9878aeb",url:"bq3n2v8a.wxlagame.com",openId:(()=>{let t=Date.now().toString(36);for(let e=0;e<7;e++)t+=Math.ceil(Math.random()*Math.pow(10,4)).toString(36);return t})(),matchCode:"match-ofvr1fjj"},cc._RF.pop()},{}],global:[function(t,e,o){"use strict";cc._RF.push(e,"39d54I9xJVAHLuoGeKSDGG4","global"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new class{constructor(){this.gameId="",this.room=null,this.playersJson=""}},cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"af2019VejdOX54d5RgQXrZy","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"8063arAqUBI272BtqJ3F3Pe","util"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkMgobe=o.openLink=o.appendLog=o.setBroadcastCallbacks=o.isInited=o.initSDK=void 0;const n=t("./config"),c=t("./global"),i=t("./ui/UILog");function a(){return!!MGOBE.Player&&!!MGOBE.Player.id}function r(t,e,o){if(!t)return;const n={onJoinRoom:()=>()=>null,onLeaveRoom:()=>()=>null,onChangeRoom:()=>()=>null,onDismissRoom:()=>()=>null,onStartFrameSync:()=>()=>null,onStopFrameSync:()=>()=>null,onChangeCustomPlayerStatus:()=>()=>null,onRemovePlayer:()=>()=>null,onRecvFromClient:()=>()=>null,onRecvFromGameSvr:()=>()=>null,onAutoRequestFrameError:()=>()=>null};Object.keys(n).forEach(c=>{const i=o[c]?o[c].bind(e):n[c];t[c]=i})}function s(t){return i.default.appendLog(t)}o.initSDK=function(t,e,o,i,s){if(a())return s&&s({code:MGOBE.ErrCode.EC_OK});const l={gameId:n.default.gameId,openId:n.default.openId,secretKey:n.default.secretKey},d={url:n.default.url,isAutoRequestFrame:!1,cacertNativeUrl:""};Object.assign(l,{gameId:t,secretKey:e}),Object.assign(d,{url:o,cacertNativeUrl:i}),MGOBE.DebuggerLog.enable=!0,cc.sys.isNative&&(MGOBE.DebuggerLog.enable=!1),MGOBE.Listener.init(l,d,t=>{t.code===MGOBE.ErrCode.EC_OK&&(c.default.room=new MGOBE.Room,c.default.gameId=l.gameId,MGOBE.Listener.add(c.default.room),r(c.default.room,null,{})),s&&s({code:t.code})})},o.isInited=a,o.setBroadcastCallbacks=r,o.appendLog=s,o.openLink=function(t,e){return"undefined"==typeof window?s("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):"function"!=typeof window.open?s("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):void window.open(t,e&&"_blank")},o.checkMgobe=function(){if("undefined"!=typeof MGOBE)return!0;const t="\u8bf7\u5148\u542f\u7528\u817e\u8baf\u4e91 MGOBE \u670d\u52a1\u5bfc\u5165 MGOBE SDK\uff01";return console.log(t),s(t),!1},cc._RF.pop()},{"./config":"config","./global":"global","./ui/UILog":"UILog"}]},{},["config","global","GameState","StateSyncLogic","Home","JudgeRoom","MgobeScene","Room","Card","Dialog","EntryRoomButtton","LinkLabel","ReadOnlyEditor","TabButton","TitleBar","UIChat","UILog","UIMap","UIMessage","UIPlayer","UIStateSync","util","use_v2.1-2.2.1_cc.Toggle_event"]);